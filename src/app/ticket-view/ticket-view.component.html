<div class="task-view-container">
    <div class="more-menu">
        <button (click)="$event.stopPropagation()" [matMenuTriggerFor]="menu" class="trash-done" mat-icon-button
            aria-label="Example icon button with a vertical three dot icon">
            <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="switchToBacklog(task)">Backlog</button>
            <button mat-menu-item (click)="editTask()">Edit</button>
            <button mat-menu-item (click)="deleteTask(task)">Delete</button>
        </mat-menu>
    </div>
    <!-- <button class="edit-btn" mat-raised-button (click)="editTask()">Edit</button> -->
    <h2 style="text-align: center; font-size: larger;">{{task.title}}</h2>
    <div class="description">
        <span class="description-title">Description:</span>
        <!-- <span>{{task.description}}</span> -->
        <div class="textfield-container max-height">{{task.description}}</div>
    </div>
    <div>
        @if (task.subTasks) {
        <div>
            <h4 style="margin-bottom: 0;">Subtasks</h4>
            <div class="subtasks-container">
                @for (subTask of task.subTasks; track $index) {
                <div>
                    <mat-checkbox [(ngModel)]="subTask.checked"
                        (ngModelChange)="onSubTaskCheckedChange(subTask, $event)"></mat-checkbox>
                    <span>{{subTask.title}}</span>
                </div>
                }
            </div>
        </div>
        }

    </div>
    <div class="prop-container">

        <div>
            <span>Category:</span>
            <mat-chip>{{task.category}}</mat-chip>
        </div>
        <div>
            <span>Project:</span>
            @if (task.project) {
            <mat-chip>{{task.project}}</mat-chip>
            }@else {
            <mat-chip>-</mat-chip>
            }
        </div>
        <div>
            <span>Priority:</span>
            @if (priorities) {
            <div class="priority-box" [ngStyle]="{ 'background-color': getColor}"></div>
            }
        </div>
    </div>
</div>